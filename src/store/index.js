import { reactive } from "vue";
import { defineStore } from "pinia";
import axios from 'axios';
import router from '../router/index'

export const useResult = defineStore('result',{
    state: ()=> ({
        resultInfo: {
            domain: 'vent-us.site',
            result: {}
        }
    }),

    actions: {
        async getData(){
            try {
                console.log('clicled')
                const res = await axios.post('http://127.0.0.1:8000/scan/', {
                    domain: this.resultInfo.domain
                })

                this.resultInfo.result = res.data
                // console.log(this.resultInfo.result)
                
                setTimeout(()=>{
                    console.log('enter timeout')
                    router.push('/')
                }, 10000)
                console.log('end')
            } catch (error) {
                console.log(error)
            }
        }
    }
})


