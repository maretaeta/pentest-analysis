<template>
    <div class=" pt-32 px-10 lg:px-20   w-full relative xl:px-20">
        <div class="pb-4">
            <h1 class="font-semibold text-xl">Scan Report</h1>
            <p class="text-sm text-gray-500">Selasa, 12/05/2023</p>
        </div>

        <div class="bg-img flex flex-col md:flex-row gap-10 p-8 rounded-xl">
            <div class="md:w-1/4">
                <div>
                    <div class="flex items-center gap-3">
                        <span class="before:block before:w-2 before:h-2 before:bg-red-500 before:rounded-full"></span>
                        <p class="font-semibold text-lg">Security Overview</p>
                    </div>
                    <p class="pl-6 pt-1 flex text-sm lg:text-base">
                        Diagram berikut menunjukkan tingkat keamanan cyber dari website anda. Nilai berikut diambil
                        berdasarkan keseluruhan aspek dan fitur yang ada.
                    </p>
                </div>
                <div class="pt-7">
                    <div class="flex items-center gap-3">
                        <span class="before:block before:w-2 before:h-2 before:bg-red-500 before:rounded-full"></span>
                        <p class="font-semibold text-lg">Target</p>
                    </div>
                    <p class="pl-6 pt-1 text-sm lg:text-base">https://widyasecurity.com</p>
                </div>
            </div>

        <div class="md:w-1/3 flex justify-center">
            <!-- <donut-chart
                background="bg-black" foreground="bg-grey"
                :size="200" unit="px" :thickness="30"
                has-legend legend-placement="top"
                :sections="sections" :total="100"
                :start-angle="0" :auto-adjust-text-size="true"
                @section-click="handleSectionClick"
            >
                <h1>75%</h1>
            </donut-chart> -->


            <Chart type="doughnut" :data="chartData" :options="chartOptions" class="w-64" >
                <h1 class="text-black">75%</h1>
            </Chart>
          </div>

            <div class="md:w-1/2 grid grid-cols-2 gap-2">
                <CardReport v-for="(item, index) in cardData" :key="index" :label="item.label" :value="item.value"
                    :gradientColor="item.gradientColor" class="flex flex-col" />
            </div>

              <!-- <vc-donut
        background="white" foreground="grey"
        :size="200" unit="px" :thickness="30"
        has-legend legend-placement="top"
        :sections="sections" :total="100"
        :start-angle="0" :auto-adjust-text-size="true"
        @section-click="handleSectionClick">
        <h1>75%</h1>
      </vc-donut> -->

        </div>
    </div>
</template>

<script>
import { ref, onMounted } from "vue";
import Chart from "primevue/chart";
import CardReport from "../components/Card/CardReport.vue";

export default {
    components: {
        Chart,
        CardReport,
    },

    data() {
        return {
            chartData: null,
            chartOptions: null,
            cardData: [
                { label: "Critical", value: "40", gradientColor: "from-red-400 via-transparent to-transparent" },
                { label: "High", value: "5", gradientColor: "from-orange-300 via-transparent to-transparent" },
                { label: "Medium", value: "23", gradientColor: "from-yellow-300 via-transparent to-transparent" },
                { label: "Low", value: "0", gradientColor: "from-green-500 via-transparent to-transparent" },
                { label: "Information", value: "0", gradientColor: "from-gray-400 via-transparent to-transparent" },
            ], 
        };
    },

    methods: {
        handleSectionClick(section, event) {
            console.log(`${section.label} clicked.`);
        },
    },

    setup() {
        const chartData = ref();
        const chartOptions = ref(null);

        const setChartData = () => {
            return {
                datasets: [
                    {
                        data: [40, 60],
                        backgroundColor: ["#2B75D1", "#DEEDFF"],
                        hoverBackgroundColor: ["#2c3e50", ],
                    },
                ],
            };
        };

        const setChartOptions = () => {
            return {
                plugins: {
                    legend: {
                        labels: {
                            cutout: "100%",
                        },
                    },
                },
            };
        };

        onMounted(() => {
            chartData.value = setChartData();
            chartOptions.value = setChartOptions();
        });

        return { chartData, chartOptions };
    },
};
</script>