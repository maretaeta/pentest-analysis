<template>
    <div class="px-10 lg:px-20   w-full relative xl:px-20 pt-16">
        <div class="pb-4">
            <div class="flex gap-2">
                <h1 class="font-semibold text-xl">Subdomain</h1>
                <vue-feather type="help-circle" size="18" class="text-gray-400 p-1" />
            </div>
            <p class="text-sm text-gray-500">Terdapat <b>{{ allRows.length }}</b> Subdomain</p>
        </div>
        <div class="gap-7 w-full">
            <div class="w-full bg-white shadow-sm rounded-xl">
                <table class="min-w-full">
                    <tbody>
                        <tr v-for="(row, index) in visibleRows" :key="index">
                            <td class="py-4 px-6 border-b flex gap-2 items-center">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect width="20" height="20" rx="2.5" fill="#F0F7FF"/>
                                    <path d="M6.25 15L9.77977 3.75H10.7103L7.18057 15H6.25Z" fill="#256DB1"/>
                                    <path d="M9.28966 15L12.8194 3.75H13.75L10.2202 15H9.28966Z" fill="#256DB1"/>
                                </svg>{{ row[0] }}</td>
                        </tr>
                    </tbody>
                </table>
                    <div v-if="showMoreButton" @click="toggleShowMoreRows" class="flex gap-2 p-4 justify-center items-center w-full text-blue-500">
                        <p>{{ showMoreRows ? 'Lebih banyak' : 'Lebih sedikit' }}</p>
                        <vue-feather :type="showMoreRows ? 'chevron-down' : 'chevron-up'" size="18" class="p-1 rotate-icon" />
                    </div>
                </div>
            <div class="">
                <InformationCard />
            </div>
        </div>
    </div>
</template>

<script>
import InformationCard from "../components/Card/InformationCard.vue";
import { useResult } from "../store";

export default {
    data() {
        const store = useResult()
        return {
            store,
            showMoreRows: true,
            allRows: [
                ["apps.widyawicara.com"],
                ["apps.widyawicara.com"],
                ["apps.widyawicara.com"],
                ["apps.widyawicara.com"],
                ["apps.widyawicara.com"],
                ["apps.widyawicara.com"],
                ["apps.widyawicara.com"],
                ["apps.widyawicara.com"],
            ],
            visibleRows: [],
            rowsPerPage: 5,
        };
    },

    computed: {
        visibleRows() {
            return this.showMoreRows ? this.allRows.slice(0, this.rowsPerPage) : this.allRows.slice();
        },
        showMoreButton() {
            return this.allRows.length > this.visibleRows.length;
        },
        buttonText() {
            return this.showMoreRows ? 'Lebih banyak' : 'Lebih sedikit';
        },
    },

    methods: {
           toggleShowMoreRows() {
            this.showMoreRows = !this.showMoreRows;
            const icon = document.querySelector('.rotate-icon');
            if (icon) {
                icon.classList.toggle('rotate180', !this.showMoreRows);
            }
        },
    },

    mounted() {
        this.visibleRows = this.allRows.slice(0, this.rowsPerPage);
    },

    

    components: {
        InformationCard,
    },
};
</script>